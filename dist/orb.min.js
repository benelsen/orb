!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.orb=t()}}(function(){var t,e,r;return function o(t,e,r){function n(i,s){if(!e[i]){if(!t[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=e[i]={exports:{}};t[i][0].call(l.exports,function(e){var r=t[i][1][e];return n(r?r:e)},l,l.exports,o,t,e,r)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(t,e,r){var o=["1972-07-01T00:00:00.000Z","1973-01-01T00:00:00.000Z","1974-01-01T00:00:00.000Z","1975-01-01T00:00:00.000Z","1976-01-01T00:00:00.000Z","1977-01-01T00:00:00.000Z","1978-01-01T00:00:00.000Z","1979-01-01T00:00:00.000Z","1980-01-01T00:00:00.000Z","1981-07-01T00:00:00.000Z","1982-07-01T00:00:00.000Z","1983-07-01T00:00:00.000Z","1985-07-01T00:00:00.000Z","1988-01-01T00:00:00.000Z","1990-01-01T00:00:00.000Z","1991-01-01T00:00:00.000Z","1992-07-01T00:00:00.000Z","1993-07-01T00:00:00.000Z","1994-07-01T00:00:00.000Z","1996-01-01T00:00:00.000Z","1997-07-01T00:00:00.000Z","1999-01-01T00:00:00.000Z","2006-01-01T00:00:00.000Z","2009-01-01T00:00:00.000Z","2012-07-01T00:00:00.000Z","2015-07-01T00:00:00.000Z"].map(function(t){return new Date(t).getTime()});e.exports=function n(t){return t=t?t instanceof Date?t.getTime():isFinite(t)?+t:new Date(t).getTime():Date.now(),o.reduce(function(e,r){return t>=r?e+1:e},10)}},{}],2:[function(t,e,r){e.exports={name:"orbjs",version:"1.0.0",description:"orb offers a few simple methods for several common problems of orbital mechanics",keywords:["orbit","orbital mechanics","orbit determination"],homepage:"https://github.com/benelsen/orb",author:{name:"Ben Elsen",url:"http://benelsen.com"},repository:{type:"git",url:"https://github.com/benelsen/orb.git"},main:"index.js",dependencies:{leapseconds:"^1.1.1"},devDependencies:{babel:"^4.7.16",babelify:"^5.0.4",browserify:"^9.0.3","complexity-report":"^1.0.6",eslint:"^0.17.1",exorcist:"^0.1.6",mocha:"^2.0.1",should:"^4.3.0","uglify-js":"^2.4.15"},scripts:{lint:"eslint src/",babel:"babel src/ -d src5/",browserify:"browserify src/orb.js -d -s orb -t [babelify --sourceMapRelative ./dist] | exorcist dist/orb.js.map > dist/orb.js",uglifyjs:"uglifyjs dist/orb.js -o dist/orb.min.js --source-map dist/orb.min.js.map --source-map-url orb.min.js.map --in-source-map dist/orb.js.map --compress unused=false --mangle",build:"npm run babel && npm run browserify && npm run uglifyjs",test:"node_modules/.bin/mocha --recursive --reporter spec --require should",prepublish:"npm run build && npm run test"},license:"MIT"}},{}],3:[function(t,e,r){"use strict";function o(t){return t*Math.PI/180}function n(t){return 180*t/Math.PI}r.deg2rad=o,r.rad2deg=n,Object.defineProperty(r,"__esModule",{value:!0})},{}],4:[function(t,e,r){"use strict";var o=t("./angular"),n=o.deg2rad,a=o.rad2deg,i={deg2rad:n,rad2deg:a};e.exports=i},{"./angular":3}],5:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=299792458;r.c=o;var n=6.67384e-11;r.G=n},{}],6:[function(t,e,r){"use strict";var o={a:6378136.6,f:.003352819697896193,invf:298.25642,e:.08181930087617338,e2:.006694397995865785,J2:.0010826359,"ω":729211514670698e-19,M:5.9721986e24,GM:3986004418e5,"ε0":23.439279444444445,"θ0":4.894961212823756};o.grs80={GM:3986005e8,a:6378137,J2:.00108263,"ω":7292115e-11,f:.0033528106811836376,invf:298.2572221008827,e:.08181919104283185,e2:.006694380022903416},o.wgs84={a:6378137,f:.0033528106647474805,invf:298.257223563,e:.08181919084262149,e2:.0066943799901413165},e.exports=o},{}],7:[function(t,e,r){"use strict";var o=function(t){return t&&t.__esModule?t["default"]:t},n=function(t){return t&&t.__esModule?t:{"default":t}},a=n(t("./common")),i=o(t("./earth")),s=o(t("./time")),u={common:a,earth:i,time:s};e.exports=u},{"./common":5,"./earth":6,"./time":8}],8:[function(t,e,r){"use strict";var o={MJDJD:-2400000.5,TTTAI:32.184,DUT1:-.5,TAIUTC:35,TAIGPS:19};e.exports=o},{}],9:[function(t,e,r){"use strict";var o=function(t){return t&&t.__esModule?t["default"]:t},n=t("../package.json").version,a=o(t("./common")),i=o(t("./constants")),s=o(t("./time")),u=o(t("./vector")),c=o(t("./transformations")),l=o(t("./position")),f={version:n,common:a,constants:i,time:s,vector:u,v:u,transformations:c,position:l};e.exports=f},{"../package.json":2,"./common":4,"./constants":7,"./position":10,"./time":16,"./transformations":20,"./vector":27}],10:[function(t,e,r){"use strict";var o=function(t){return t&&t.__esModule?t["default"]:t},n=o(t("./keplerian")),a=o(t("./keplerEquation")),i=o(t("./stateToKepler")),s={keplerian:n,simple:n,keplerEquation:a,stateToKepler:i};e.exports=s},{"./keplerEquation":11,"./keplerian":12,"./stateToKepler":13}],11:[function(t,e,r){"use strict";function o(t,e){var r=void 0===arguments[2]?1e-18:arguments[2],o=void 0===arguments[3]?100:arguments[3],n;n=.8>t?e:Math.PI;for(var a=1,i=0;Math.abs(a)>r&&o>i;)a=(e+t*Math.sin(n)-n)/(1-t*Math.cos(n)),n+=a,i++;return n}e.exports=o},{}],12:[function(t,e,r){"use strict";function o(t,e,r,o,n,u,c,l,f,d){var h=void 0===arguments[7]?0:arguments[7],M=a.earth.GM;f&&(M=a.common.G*f),d&&(M=a.common.G*(f+d));var p=t*(1-Math.pow(e,2)),m=Math.sqrt(M/Math.pow(t,3)),T=h+m*(u-c),v=i(e,T),g=2*Math.atan(Math.sqrt((1+e)/(1-e))*Math.tan(v/2)),b=p/(1+e*Math.cos(g)),x=[b*Math.cos(g),b*Math.sin(g),0],_=[-Math.sqrt(M/p)*Math.sin(g),Math.sqrt(M/p)*(e+Math.cos(g)),0];return[s(x,o,n,r),s(_,o,n,r)]}var n=function(t){return t&&t.__esModule?t["default"]:t};e.exports=o;var a=n(t("../constants")),i=n(t("./keplerEquation")),s=t("../transformations/orbitalPlaneToInertial").orbitalPlaneToInertial},{"../constants":7,"../transformations/orbitalPlaneToInertial":22,"./keplerEquation":11}],13:[function(t,e,r){"use strict";function o(t,e,r,o,n){var u;u=o&&n?s.common.G*(o+n):o?s.common.G*o:s.earth.GM;var c=i.cross(t,e),l=Math.atan2(c[0],-c[1]),f=Math.atan2(Math.hypot.apply(Math,a(c.slice(0,2))),c[2]),d=i.dot(c,c)/u,h=Math.hypot.apply(Math,a(t)),M=Math.sqrt(d/u*Math.pow(i.dot(t,e)/h,2)+Math.pow(d/h-1,2)),p=Math.atan2(Math.sqrt(d/u)*i.dot(t,e),d-h),m=i.mm(i.r(f,1),i.mm(i.r(l,3),t)),T=Math.atan2(m[1],m[0])-p,v=void 0,g=void 0;if(1>M){g=d/(1-Math.pow(M,2));var b=2*Math.atan(Math.sqrt((1-M)/(1+M))*Math.tan(p/2));v=r-Math.sqrt(Math.pow(g,3)/u)*(b-M*Math.sin(b))}else if(M>1){g=d/(Math.pow(M,2)-1);var x=2*Math.atanh(Math.sqrt((1-M)/(1+M))*Math.tan(p/2));v=r+Math.sqrt(Math.pow(g,3)/u)*(x-M*Math.sinh(x))}else 1===M&&(v=r-.5*Math.sqrt(Math.pow(d,3)/u)*(Math.tan(p/2)+1/3*Math.pow(Math.tan(p/2),3)));return[g||d,M,f,l,T,v]}var n=function(t){return t&&t.__esModule?t["default"]:t},a=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)};e.exports=o;var i=n(t("../vector")),s=n(t("../constants"))},{"../constants":7,"../vector":27}],14:[function(t,e,r){"use strict";function o(t){return t+p.MJDJD}function n(t){return t-p.MJDJD}function a(t){return t+p.TTTAI}function i(t){return t-p.TTTAI}function s(t){return t-M(new Date(1e3*t))}function u(t){return t+M(new Date(1e3*t))}function c(t){return t-p.TAIGPS}function l(t){return t+p.TAIGPS}function f(t){return c(u(t))}function d(t){return s(l(t))}var h=function(t){return t&&t.__esModule?t["default"]:t};r.JDtoMJD=o,r.MJDtoJD=n,r.TAItoTT=a,r.TTtoTAI=i,r.TAItoUTC=s,r.UTCtoTAI=u,r.TAItoGPS=c,r.GPStoTAI=l,r.UTCtoGPS=f,r.GPStoUTC=d,Object.defineProperty(r,"__esModule",{value:!0});var M=h(t("leapseconds")),p=h(t("../constants/time"))},{"../constants/time":8,leapseconds:1}],15:[function(t,e,r){"use strict";function o(t){var e=void 0,r=void 0,o=void 0,n=void 0;if(t instanceof Array)e=t[0],r=t[1],o=t[2],n=t[3]+t[4]/60+t[5]/3600;else{if(!(t instanceof Date||"number"==typeof t))throw new Error("date is of invalid type");e=t.getUTCFullYear(),r=t.getUTCMonth()+1,o=t.getUTCDate(),n=t.getUTCHours()+t.getUTCMinutes()/60+t.getUTCSeconds()/3600}var a=r>2?e:e-1,i=r>2?r:r+12,s=2-Math.floor(a/100)+Math.floor(a/400),u=Math.floor(365.25*a)+Math.floor(30.6001*(i+1))+o+s+1720994.5;return u+n/24}e.exports=o},{}],16:[function(t,e,r){"use strict";var o=function(t){return t&&t.__esModule?t:{"default":t}},n=function(t){return t&&t.__esModule?t["default"]:t},a=n(t("leapseconds")),i=o(t("./conversions")),s=n(t("./dateToJD")),u={leapSeconds:a,dateToJD:s};for(var c in i)u[c]=i[c];e.exports=u},{"./conversions":14,"./dateToJD":15,leapseconds:1}],17:[function(t,e,r){"use strict";function o(t){var e=void 0===arguments[1]?i.a:arguments[1],r=void 0===arguments[2]?i.e:arguments[2],o=Math.sqrt(Math.pow(e,2)*(1-Math.pow(r,2)));return[e*Math.cos(t[1])*Math.cos(t[0]),e*Math.cos(t[1])*Math.sin(t[0]),o*Math.sin(t[1])]}function n(t){var e=void 0===arguments[1]?i.a:arguments[1],r=void 0===arguments[2]?i.e:arguments[2],o=Math.hypot(t[0],t[1]),n=Math.sqrt(Math.pow(e,2)*(1-Math.pow(r,2)));return[Math.atan2(t[1],t[0]),Math.atan2(t[2]*e,o*n)]}var a=function(t){return t&&t.__esModule?t["default"]:t};r.ellipsoidalToCartesian=o,r.cartesianToEllipsoidal=n,Object.defineProperty(r,"__esModule",{value:!0});var i=a(t("../constants/earth"))},{"../constants/earth":6}],18:[function(t,e,r){"use strict";function o(t,e,r,o,n){var a=void 0===arguments[2]?i.a:arguments[2],c=void 0===arguments[3]?i.e:arguments[3],l=s(e,a,c),f=t.map(function(t,e){return t-l[e]}),d;return d=n?u.mm(u.r(Math.PI/2-e[1],2),u.r(e[0],3)):u.mm(u.q(1),u.mm(u.r(Math.PI/2-e[1],2),u.r(e[0],3))),u.mm(d,f)}function n(t,e,r,o,n){var a=void 0===arguments[2]?i.a:arguments[2],c=void 0===arguments[3]?i.e:arguments[3],l=s(e,a,c),f;f=n?u.mm(u.r(-e[0],3),u.r(e[1]-Math.PI/2,2)):u.mm(u.mm(u.r(-e[0],3),u.r(e[1]-Math.PI/2,2)),u.q(1));var d=u.mm(f,t);return d.map(function(t,e){return t+l[e]})}var a=function(t){return t&&t.__esModule?t["default"]:t};r.fixedToTopocentric=o,r.topocentricToFixed=n,Object.defineProperty(r,"__esModule",{value:!0});var i=a(t("../constants/earth")),s=t("./geodetic").geodeticToCartesian,u=a(t("../vector"))},{"../constants/earth":6,"../vector":27,"./geodetic":19}],19:[function(t,e,r){"use strict";function o(t){var e=void 0===arguments[1]?i.a:arguments[1],r=void 0===arguments[2]?i.e:arguments[2],o=e/Math.sqrt(1-Math.pow(r*Math.sin(t[1]),2));return[(o+t[2])*Math.cos(t[1])*Math.cos(t[0]),(o+t[2])*Math.cos(t[1])*Math.sin(t[0]),(o*(1-Math.pow(r,2))+t[2])*Math.sin(t[1])]}function n(t){for(var e=void 0===arguments[1]?i.a:arguments[1],r=void 0===arguments[2]?i.e:arguments[2],o=Math.atan2(t[1],t[0]),n=Math.hypot(t[0],t[1]),a=Math.atan2(t[2],n),s,u,c,l=0;100>l&&(s=e/Math.sqrt(1-Math.pow(r*Math.sin(a),2)),c=t[2]+Math.pow(r,2)*s*Math.sin(a),u=Math.atan2(c,n),!(Math.abs(u-a)<1e-15));)a=u,l++;var f=n/Math.cos(u)-s;return[o,u,f]}var a=function(t){return t&&t.__esModule?t["default"]:t};r.geodeticToCartesian=o,r.cartesianToGeodetic=n,Object.defineProperty(r,"__esModule",{value:!0});var i=a(t("../constants/earth"))},{"../constants/earth":6}],20:[function(t,e,r){"use strict";var o=t("./spherical"),n=o.sphericalToCartesian,a=o.cartesianToSpherical,i=t("./ellipsoidal"),s=i.ellipsoidalToCartesian,u=i.cartesianToEllipsoidal,c=t("./geodetic"),l=c.geodeticToCartesian,f=c.cartesianToGeodetic,d=t("./fixedToTopocentric"),h=d.fixedToTopocentric,M=d.topocentricToFixed,p=t("./inertialToFixed"),m=p.inertialToFixed,T=p.fixedToInertial,v=t("./orbitalPlaneToInertial").orbitalPlaneToInertial,g=t("./topocentricToHorizontal"),b=g.topocentricToHorizontal,x=g.horizontalToTopocentric,_={sphericalToCartesian:n,cartesianToSpherical:a,ellipsoidalToCartesian:s,cartesianToEllipsoidal:u,geodeticToCartesian:l,cartesianToGeodetic:f,fixedToTopocentric:h,topocentricToFixed:M,inertialToFixed:m,fixedToInertial:T,orbitalPlaneToInertial:v,topocentricToHorizontal:b,horizontalToTopocentric:x};e.exports=_},{"./ellipsoidal":17,"./fixedToTopocentric":18,"./geodetic":19,"./inertialToFixed":21,"./orbitalPlaneToInertial":22,"./spherical":23,"./topocentricToHorizontal":24}],21:[function(t,e,r){"use strict";function o(t,e){var r=void 0===arguments[2]?i.ω:arguments[2],o=void 0===arguments[3]?3:arguments[3];return s.mm(s.r(r*e,3),t)}function n(t,e,r,n){return o(t,e,-r,n)}var a=function(t){return t&&t.__esModule?t["default"]:t};r.inertialToFixed=o,r.fixedToInertial=n,Object.defineProperty(r,"__esModule",{value:!0});var i=a(t("../constants/earth")),s=a(t("../vector"))},{"../constants/earth":6,"../vector":27}],22:[function(t,e,r){"use strict";function o(t,e,r,o){return a.mm(a.r(-e,3),a.mm(a.r(-o,1),a.mm(a.r(-r,3),t)))}var n=function(t){return t&&t.__esModule?t["default"]:t};r.orbitalPlaneToInertial=o,Object.defineProperty(r,"__esModule",{value:!0});var a=n(t("../vector"))},{"../vector":27}],23:[function(t,e,r){"use strict";function o(t){return[t[2]*Math.cos(t[1])*Math.cos(t[0]),t[2]*Math.cos(t[1])*Math.sin(t[0]),t[2]*Math.sin(t[1])]}function n(t){return[Math.atan2(t[1],t[0]),Math.atan2(t[2],Math.sqrt(t[0]*t[0]+t[1]*t[1])),Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])]}r.sphericalToCartesian=o,r.cartesianToSpherical=n,Object.defineProperty(r,"__esModule",{value:!0})},{}],24:[function(t,e,r){"use strict";function o(t){var e=(2*Math.PI+Math.atan2(t[1],t[0]))%(2*Math.PI);return[e,Math.atan2(t[2],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))),Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))]}function n(t){return[t[2]*Math.cos(t[1])*Math.cos(t[0]),t[2]*Math.cos(t[1])*Math.sin(t[0]),t[2]*Math.sin(t[1])]}r.topocentricToHorizontal=o,r.horizontalToTopocentric=n,Object.defineProperty(r,"__esModule",{value:!0})},{}],25:[function(t,e,r){"use strict";function o(t,e){if(3===t.length&&3===e.length)return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]];throw new Error("unsupported vector sizes")}e.exports=o},{}],26:[function(t,e,r){"use strict";function o(t,e){if(t.length!==e.length)throw new Error("Vectors have different sizes");return t.reduce(function(r,o,n){return r+t[n]*e[n]},0)}e.exports=o},{}],27:[function(t,e,r){"use strict";var o=function(t){return t&&t.__esModule?t["default"]:t},n=o(t("./matrixMultiplication")),a=o(t("./mirrorMatrix")),i=o(t("./rotationMatrix")),s=o(t("./crossProduct")),u=o(t("./dotProduct")),c={matrixMultiplication:n,mm:n,mirrorMatrix:a,q:a,rotationMatrix:i,r:i,crossProduct:s,cross:s,dotProduct:u,dot:u};e.exports=c},{"./crossProduct":25,"./dotProduct":26,"./matrixMultiplication":28,"./mirrorMatrix":29,"./rotationMatrix":30}],28:[function(t,e,r){"use strict";function o(t,e){return 9===e.length?[t[0]*e[0]+t[1]*e[3]+t[2]*e[6],t[0]*e[1]+t[1]*e[4]+t[2]*e[7],t[0]*e[2]+t[1]*e[5]+t[2]*e[8],t[3]*e[0]+t[4]*e[3]+t[5]*e[6],t[3]*e[1]+t[4]*e[4]+t[5]*e[7],t[3]*e[2]+t[4]*e[5]+t[5]*e[8],t[6]*e[0]+t[7]*e[3]+t[8]*e[6],t[6]*e[1]+t[7]*e[4]+t[8]*e[7],t[6]*e[2]+t[7]*e[5]+t[8]*e[8]]:3===e.length?[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[3]*e[0]+t[4]*e[1]+t[5]*e[2],t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]:null}e.exports=o},{}],29:[function(t,e,r){"use strict";function o(t){var e=[1,0,0,0,1,0,0,0,1];return e[4*--t]*=-1,e}e.exports=o},{}],30:[function(t,e,r){"use strict";function o(t,e){t%=2*Math.PI;var r,o;switch(0===t?(r=1,o=0):t===Math.PI/2||t===-1.5*Math.PI?(r=0,o=1):t===Math.PI||t===-Math.PI?(r=-1,o=0):t===1.5*Math.PI||t===-Math.PI/2?(r=0,o=-1):(r=Math.cos(t),o=Math.sin(t)),e){case 1:return[1,0,0,0,r,o,0,-o,r];case 2:return[r,0,-o,0,1,0,o,0,r];case 3:return[r,o,0,-o,r,0,0,0,1];default:throw new Error("rotation axis has to be 1, 2 or 3")}}e.exports=o},{}]},{},[9])(9)});
//# sourceMappingURL=orb.min.js.map
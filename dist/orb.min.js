!function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.orb=t()}}(function(){var t,n,o;return function a(t,n,o){function e(i,c){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(r)return r(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(n){var o=t[i][1][n];return e(o?o:n)},u,u.exports,a,t,n,o)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)e(o[i]);return e}({1:[function(t,n,o){n.exports=t("./src/orb.js")},{"./src/orb.js":8}],2:[function(t,n,o){var a={};a.deg2rad=function(t){return t*Math.PI/180},a.rad2deg=function(t){return 180*t/Math.PI},o.angular=a},{}],3:[function(t,n,o){var a={},e=t("./angular").angular;for(var r in e)a[r]=e[r];o.common=a},{"./angular":2}],4:[function(t,n,o){var a={c:299792458,G:6.67428e-11};o.common=a},{}],5:[function(t,n,o){var a={a:6378136.6,f:.003352819697896193,invf:298.25642,e:.08181930087617338,e2:.006694397995865785,J2:.0010826359,ω:729211514670698e-19,M:5.9721986e24,GM:3986004418e5,ε0:23.439279444444445,θ0:4.894961212823756};a.grs80={GM:3986005e8,a:6378137,J2:.00108263,ω:7292115e-11,f:.0033528106811836376,invf:298.2572221008827,e:.08181919104283185,e2:.006694380022903416},a.wgs84={a:6378137,f:.0033528106647474805,invf:298.257223563,e:.08181919084262149,e2:.0066943799901413165},o.earth=a},{}],6:[function(t,n,o){var a={};a.common=t("./common").common,a.earth=t("./earth").earth,a.time=t("./time").time,o.constants=a},{"./common":4,"./earth":5,"./time":7}],7:[function(t,n,o){var a={MJDJD:-2400000.5,TTTAI:32.184,DUT1:-.3,TAIUTC:35,TAIGPS:19};o.time=a},{}],8:[function(t,n,o){var a={version:"0.1.3"};a.common=t("./common").common,a.constants=t("./constants").constants,a.time=t("./time").time,a.vector=a.v=t("./vector").vector,a.transformations=t("./transformations").transformations,a.position=t("./position").position,n.exports=a},{"./common":3,"./constants":6,"./position":9,"./time":14,"./transformations":19,"./vector":24}],9:[function(t,n,o){var a={};a.simple=t("./simple").simple,a.keplerEquation=t("./keplerEquation").keplerEquation,o.position=a},{"./keplerEquation":10,"./simple":11}],10:[function(t,n,o){var a=function(t,n){var o;o=.8>t?n:Math.PI;for(var a=1,e=0;Math.abs(a)>1e-18&&100>e;)a=(n+t*Math.sin(o)-o)/(1-t*Math.cos(o)),o+=a,e++;return o};o.keplerEquation=a},{}],11:[function(t,n,o){var a=t("../constants").constants,e=t("./keplerEquation").keplerEquation,r=t("../transformations/orbitalPlaneToInertial").orbitalPlaneToInertial,i=function(t,n,o,i,c,s,u,l,T,f){l||(l=0);var h=a.earth.GM;T&&(h=a.common.G*T),f&&(h=a.common.G*(T+f));var M=t*(1-n*n),p=Math.sqrt(h/Math.pow(t,3)),m=l+p*(s-u),v=e(n,m),d=2*Math.atan(Math.sqrt((1+n)/(1-n))*Math.tan(v/2)),w=M/(1+n*Math.cos(d)),D=[w*Math.cos(d),w*Math.sin(d),0],I=[-Math.sqrt(h/M)*Math.sin(d),Math.sqrt(h/M)*(n+Math.cos(d)),0],x=r(D,i,c,o),P=r(I,i,c,o);return[x,P]};o.simple=i},{"../constants":6,"../transformations/orbitalPlaneToInertial":21,"./keplerEquation":10}],12:[function(t,n,o){var a=t("../constants/time").time,e=t("./leapSeconds").leapSeconds,r={};r.JDtoMJD=function(t){return t+a.MJDJD},r.MJDtoJD=function(t){return t-a.MJDJD},r.TAItoTT=function(t){return t+a.TTTAI},r.TTtoTAI=function(t){return t-a.TTTAI},r.TAItoUTC=function(t){return t-e(new Date(1e3*t))},r.UTCtoTAI=function(t){return t+e(new Date(1e3*t))},r.TAItoGPS=function(t){return t-a.TAIGPS},r.GPStoTAI=function(t){return t+a.TAIGPS},r.UTCtoGPS=function(t){return r.TAItoGPS(r.UTCtoTAI(t))},r.GPStoUTC=function(t){return r.TAItoUTC(r.GPStoTAI(t))},o.conversions=r},{"../constants/time":7,"./leapSeconds":15}],13:[function(t,n,o){var a=function(t){var n,o,a,e;if(t instanceof Array)n=t[0],o=t[1],a=t[2],e=t[3]+t[4]/60+t[5]/3600;else{if(!(t instanceof Date))throw new Error("date is of invalid type");n=t.getUTCFullYear(),o=t.getUTCMonth()+1,a=t.getUTCDate(),e=t.getUTCHours()+t.getUTCMinutes()/60+t.getUTCSeconds()/3600}var r=o>2?n:n-1,i=o>2?o:o+12,c=2-Math.floor(r/100)+Math.floor(r/400),s=Math.floor(365.25*r)+Math.floor(30.6001*(i+1))+a+c+1720994.5;return s+e/24};o.dateToJD=a},{}],14:[function(t,n,o){var a={},e=t("./conversions").conversions;for(var r in e)a[r]=e[r];a.leapSeconds=t("./leapSeconds").leapSeconds,a.dateToJD=t("./dateToJD").dateToJD,o.time=a},{"./conversions":12,"./dateToJD":13,"./leapSeconds":15}],15:[function(t,n,o){var a=[new Date("1972-06-30T23:59:59.999Z"),new Date("1972-12-31T23:59:59.999Z"),new Date("1973-12-31T23:59:59.999Z"),new Date("1974-12-31T23:59:59.999Z"),new Date("1975-12-31T23:59:59.999Z"),new Date("1976-12-31T23:59:59.999Z"),new Date("1977-12-31T23:59:59.999Z"),new Date("1978-12-31T23:59:59.999Z"),new Date("1979-12-31T23:59:59.999Z"),new Date("1981-06-30T23:59:59.999Z"),new Date("1982-06-30T23:59:59.999Z"),new Date("1983-06-30T23:59:59.999Z"),new Date("1985-06-30T23:59:59.999Z"),new Date("1987-12-31T23:59:59.999Z"),new Date("1989-12-31T23:59:59.999Z"),new Date("1990-12-31T23:59:59.999Z"),new Date("1992-06-30T23:59:59.999Z"),new Date("1993-06-30T23:59:59.999Z"),new Date("1994-06-30T23:59:59.999Z"),new Date("1995-12-31T23:59:59.999Z"),new Date("1997-06-30T23:59:59.999Z"),new Date("1998-12-31T23:59:59.999Z"),new Date("2005-12-31T23:59:59.999Z"),new Date("2008-12-31T23:59:59.999Z"),new Date("2012-06-30T23:59:59.999Z")],e=function(t){return 10+a.filter(function(n){return t>n}).length};o.leapSeconds=e},{}],16:[function(t,n,o){var a=t("../constants/earth").earth,e=function(t,n,o){(void 0===n||void 0===o)&&(n=a.a,o=a.e);var e=Math.sqrt(n*n*(1-o*o));return[n*Math.cos(t[1])*Math.cos(t[0]),n*Math.cos(t[1])*Math.sin(t[0]),e*Math.sin(t[1])]},r=function(t,n,o){(void 0===n||void 0===o)&&(n=a.a,o=a.e);var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]),r=Math.sqrt(n*n*(1-o*o));return[Math.atan2(t[1],t[0]),Math.atan2(t[2]*n,e*r)]};o.ellipsoidalToCartesian=e,o.cartesianToEllipsoidal=r},{"../constants/earth":5}],17:[function(t,n,o){var a=t("../constants/earth").earth,e=t("./geodetic").geodeticToCartesian,r=t("../vector").vector,i=function(t,n,o,i,c){o||(o=a.a),i||0===i||(i=a.e);var s=e(n,o,i),u=t.map(function(t,n){return t-s[n]}),l;return l=c?r.mm(r.r(Math.PI/2-n[1],2),r.r(n[0],3)):r.mm(r.q(1),r.mm(r.r(Math.PI/2-n[1],2),r.r(n[0],3))),r.mm(l,u)},c=function(t,n,o,i,c){o||(o=a.a),i||0===i||(i=a.e);var s=e(n,o,i),u;u=c?r.mm(r.r(-n[0],3),r.r(n[1]-Math.PI/2,2)):r.mm(r.mm(r.r(-n[0],3),r.r(n[1]-Math.PI/2,2)),r.q(1));var l=r.mm(u,t);return l.map(function(t,n){return t+s[n]})};o.fixedToTopocentric=i,o.topocentricToFixed=c},{"../constants/earth":5,"../vector":24,"./geodetic":18}],18:[function(t,n,o){var a=t("../constants/earth").earth,e=function(t,n,o){(void 0===n||void 0===o)&&(n=a.a,o=a.e);var e=n/Math.sqrt(1-Math.pow(o*Math.sin(t[1]),2));return[(e+t[2])*Math.cos(t[1])*Math.cos(t[0]),(e+t[2])*Math.cos(t[1])*Math.sin(t[0]),(e*(1-o*o)+t[2])*Math.sin(t[1])]},r=function(t,n,o){(void 0===n||void 0===o)&&(n=a.a,o=a.e);for(var e=Math.atan2(t[1],t[0]),r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),i=Math.atan2(t[2],r),c,s,u=0;100>u;){c=n/Math.sqrt(1-Math.pow(o*Math.sin(i),2));var l=t[2]+o*o*c*Math.sin(i);if(s=Math.atan2(l,r),Math.abs(s-i)<1e-15)break;i=s,u++}var T=r/Math.cos(s)-c;return[e,s,T]};o.geodeticToCartesian=e,o.cartesianToGeodetic=r},{"../constants/earth":5}],19:[function(t,n,o){var a={};a.sphericalToCartesian=t("./spherical").sphericalToCartesian,a.cartesianToSpherical=t("./spherical").cartesianToSpherical,a.ellipsoidalToCartesian=t("./ellipsoidal").ellipsoidalToCartesian,a.cartesianToEllipsoidal=t("./ellipsoidal").cartesianToEllipsoidal,a.geodeticToCartesian=t("./geodetic").geodeticToCartesian,a.cartesianToGeodetic=t("./geodetic").cartesianToGeodetic,a.fixedToTopocentric=t("./fixedToTopocentric").fixedToTopocentric,a.topocentricToFixed=t("./fixedToTopocentric").topocentricToFixed,a.inertialToFixed=t("./inertialToFixed").inertialToFixed,a.fixedToInertial=t("./inertialToFixed").fixedToInertial,a.orbitalPlaneToInertial=t("./orbitalPlaneToInertial").orbitalPlaneToInertial,a.topocentricToHorizontal=t("./topocentricToHorizontal").topocentricToHorizontal,a.horizontalToTopocentric=t("./topocentricToHorizontal").horizontalToTopocentric,o.transformations=a},{"./ellipsoidal":16,"./fixedToTopocentric":17,"./geodetic":18,"./inertialToFixed":20,"./orbitalPlaneToInertial":21,"./spherical":22,"./topocentricToHorizontal":23}],20:[function(t,n,o){var a=t("../constants/earth").earth,e=t("../vector").vector,r=function(t,n,o,r){return r||(r=3),o||(o=a.ω),e.mm(e.r(o*n,3),t)},i=function(t,n,o,a){return r(t,n,-o,a)};o.inertialToFixed=r,o.fixedToInertial=i},{"../constants/earth":5,"../vector":24}],21:[function(t,n,o){var a=t("../vector").vector,e=function(t,n,o,e){return a.mm(a.r(-n,3),a.mm(a.r(-e,1),a.mm(a.r(-o,3),t)))};o.orbitalPlaneToInertial=e},{"../vector":24}],22:[function(t,n,o){var a=function(t){return[t[2]*Math.cos(t[1])*Math.cos(t[0]),t[2]*Math.cos(t[1])*Math.sin(t[0]),t[2]*Math.sin(t[1])]},e=function(t){return[Math.atan2(t[1],t[0]),Math.atan2(t[2],Math.sqrt(t[0]*t[0]+t[1]*t[1])),Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])]};o.sphericalToCartesian=a,o.cartesianToSpherical=e},{}],23:[function(t,n,o){var a=function(t){var n=(2*Math.PI+Math.atan2(t[1],t[0]))%(2*Math.PI);return[n,Math.atan2(t[2],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))),Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))]},e=function(t){return[t[2]*Math.cos(t[1])*Math.cos(t[0]),t[2]*Math.cos(t[1])*Math.sin(t[0]),t[2]*Math.sin(t[1])]};o.topocentricToHorizontal=a,o.horizontalToTopocentric=e},{}],24:[function(t,n,o){var a={};a.matrixMultiplication=a.mm=t("./matrixMultiplication").matrixMultiplication,a.mirrorMatrix=a.q=t("./mirrorMatrix").mirrorMatrix,a.rotationMatrix=a.r=t("./rotationMatrix").rotationMatrix,o.vector=a},{"./matrixMultiplication":25,"./mirrorMatrix":26,"./rotationMatrix":27}],25:[function(t,n,o){var a=function(t,n){return 9===n.length?[t[0]*n[0]+t[1]*n[3]+t[2]*n[6],t[0]*n[1]+t[1]*n[4]+t[2]*n[7],t[0]*n[2]+t[1]*n[5]+t[2]*n[8],t[3]*n[0]+t[4]*n[3]+t[5]*n[6],t[3]*n[1]+t[4]*n[4]+t[5]*n[7],t[3]*n[2]+t[4]*n[5]+t[5]*n[8],t[6]*n[0]+t[7]*n[3]+t[8]*n[6],t[6]*n[1]+t[7]*n[4]+t[8]*n[7],t[6]*n[2]+t[7]*n[5]+t[8]*n[8]]:3===n.length?[t[0]*n[0]+t[1]*n[1]+t[2]*n[2],t[3]*n[0]+t[4]*n[1]+t[5]*n[2],t[6]*n[0]+t[7]*n[1]+t[8]*n[2]]:null};o.matrixMultiplication=a},{}],26:[function(t,n,o){var a=function(t){var n=[1,0,0,0,1,0,0,0,1];return n[4*--t]*=-1,n};o.mirrorMatrix=a},{}],27:[function(t,n,o){var a=function(t,n){t%=2*Math.PI;var o,a;switch(0===t?(o=1,a=0):t===Math.PI/2||t===-1.5*Math.PI?(o=0,a=1):t===Math.PI||t===-Math.PI?(o=-1,a=0):t===1.5*Math.PI||t===-Math.PI/2?(o=0,a=-1):(o=Math.cos(t),a=Math.sin(t)),n){case 1:return[1,0,0,0,o,a,0,-a,o];case 2:return[o,0,-a,0,1,0,a,0,o];case 3:return[o,a,0,-a,o,0,0,0,1];default:throw new Error("rotation axis has to be 1, 2 or 3")}};o.rotationMatrix=a},{}]},{},[1])(1)});
//# sourceMappingURL=dist/orb.min.js.map
!function(t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof window?window.orb=t():"undefined"!=typeof global?global.orb=t():"undefined"!=typeof self&&(self.orb=t())}(function(){var t,n,a;return function o(t,n,a){function r(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(e)return e(i,!0);throw new Error("Cannot find module '"+i+"'")}var h=n[i]={exports:{}};t[i][0].call(h.exports,function(n){var a=t[i][1][n];return r(a?a:n)},h,h.exports,o,t,n,a)}return n[i].exports}for(var e="function"==typeof require&&require,i=0;i<a.length;i++)r(a[i]);return r}({1:[function(t,n,a){n.exports=function(){"use strict";var t={version:"0.1.1"};t.constants={},t.constants.common={c:299792458,G:6.67428e-11},t.constants.time={MJDJD:-2400000.5,TTTAI:32.184,DUT1:-.1,TAIUTC:35,TAIGPS:19},t.constants.earth={a:6378136.6,f:.003352819697896193,invf:298.25642,e:.08181930087617338,e2:.006694397995865785,J2:.0010826359,ω:729211514670698e-19,M:5.9721986e24,GM:3986004418e5,ε0:23.439279444444445,θ0:4.894961212823756},t.constants.grs80={GM:3986005e8,a:6378137,J2:.00108263,ω:7292115e-11,f:.0033528106811836376,invf:298.2572221008827,e:.08181919104283185,e2:.006694380022903416},t.constants.wgs84={a:6378137,f:.0033528106647474805,invf:298.257223563,e:.08181919084262149,e2:.0066943799901413165},t.common={},t.common.deg2rad=function(t){return t*Math.PI/180},t.common.rad2deg=function(t){return 180*t/Math.PI},t.vector=t.v={},t.vector.matrixMultiplication=function(t,n){return 9===n.length?[t[0]*n[0]+t[1]*n[3]+t[2]*n[6],t[0]*n[1]+t[1]*n[4]+t[2]*n[7],t[0]*n[2]+t[1]*n[5]+t[2]*n[8],t[3]*n[0]+t[4]*n[3]+t[5]*n[6],t[3]*n[1]+t[4]*n[4]+t[5]*n[7],t[3]*n[2]+t[4]*n[5]+t[5]*n[8],t[6]*n[0]+t[7]*n[3]+t[8]*n[6],t[6]*n[1]+t[7]*n[4]+t[8]*n[7],t[6]*n[2]+t[7]*n[5]+t[8]*n[8]]:3===n.length?[t[0]*n[0]+t[1]*n[1]+t[2]*n[2],t[3]*n[0]+t[4]*n[1]+t[5]*n[2],t[6]*n[0]+t[7]*n[1]+t[8]*n[2]]:null},t.vector.mm=t.vector.matrixMultiplication,t.vector.rotationMatrix=function(t,n){t%=2*Math.PI;var a,o;switch(0===t?(a=1,o=0):t===Math.PI/2||t===-1.5*Math.PI?(a=0,o=1):t===Math.PI||t===-Math.PI?(a=-1,o=0):t===1.5*Math.PI||t===-Math.PI/2?(a=0,o=-1):(a=Math.cos(t),o=Math.sin(t)),n){case 1:return[1,0,0,0,a,o,0,-o,a];case 2:return[a,0,-o,0,1,0,o,0,a];case 3:return[a,o,0,-o,a,0,0,0,1];default:throw new Error("rotation axis has to be 1, 2 or 3")}},t.vector.r=t.vector.rotationMatrix,t.vector.mirrorMatrix=function(t){var n=[1,0,0,0,1,0,0,0,1];return n[4*--t]*=-1,n},t.vector.q=t.vector.mirrorMatrix,t.time={},t.time.JDtoMJD=function(n){return n+t.constants.time.MJDJD},t.time.MJDtoJD=function(n){return n-t.constants.time.MJDJD},t.time.TAItoTT=function(n){return n+t.constants.time.TTTAI},t.time.TTtoTAI=function(n){return n-t.constants.time.TTTAI},t.time.TAItoUTC=function(n){return n-t.constants.time.TAIUTC},t.time.UTCtoTAI=function(n){return n+t.constants.time.TAIUTC},t.time.TAItoGPS=function(n){return n-t.constants.time.TAIGPS},t.time.GPStoTAI=function(n){return n+t.constants.time.TAIGPS},t.time.UTCtoGPS=function(n){return t.time.TAItoGPS(t.time.UTCtoTAI(n))},t.time.GPStoUTC=function(n){return t.time.TAItoUTC(t.time.GPStoTAI(n))};var n=[new Date("1972-06-30T23:59:59.999Z"),new Date("1972-12-31T23:59:59.999Z"),new Date("1973-12-31T23:59:59.999Z"),new Date("1974-12-31T23:59:59.999Z"),new Date("1975-12-31T23:59:59.999Z"),new Date("1976-12-31T23:59:59.999Z"),new Date("1977-12-31T23:59:59.999Z"),new Date("1978-12-31T23:59:59.999Z"),new Date("1979-12-31T23:59:59.999Z"),new Date("1981-06-30T23:59:59.999Z"),new Date("1982-06-30T23:59:59.999Z"),new Date("1983-06-30T23:59:59.999Z"),new Date("1985-06-30T23:59:59.999Z"),new Date("1987-12-31T23:59:59.999Z"),new Date("1989-12-31T23:59:59.999Z"),new Date("1990-12-31T23:59:59.999Z"),new Date("1992-06-30T23:59:59.999Z"),new Date("1993-06-30T23:59:59.999Z"),new Date("1994-06-30T23:59:59.999Z"),new Date("1995-12-31T23:59:59.999Z"),new Date("1997-06-30T23:59:59.999Z"),new Date("1998-12-31T23:59:59.999Z"),new Date("2005-12-31T23:59:59.999Z"),new Date("2008-12-31T23:59:59.999Z"),new Date("2012-06-30T23:59:59.999Z")];return t.time.leapSeconds=function(t){return 10+n.filter(function(n){return t>n}).length},t.time.dateToJD=function(t){var n,a,o,r;if(t instanceof Array)n=t[0],a=t[1],o=t[2],r=t[3]+t[4]/60+t[5]/3600;else{if(!(t instanceof Date))throw new Error("date is of invalid type");n=t.getUTCFullYear(),a=t.getUTCMonth()+1,o=t.getUTCDate(),r=t.getUTCHours()+t.getUTCMinutes()/60+t.getUTCSeconds()/3600}var e=a>2?n:n-1,i=a>2?a:a+12,s=2-Math.floor(e/100)+Math.floor(e/400),c=Math.floor(365.25*e)+Math.floor(30.6001*(i+1))+o+s+1720994.5;return c+r/24},t.transformations={},t.transformations.sphericalToCartesian=function(t){return[t[2]*Math.cos(t[1])*Math.cos(t[0]),t[2]*Math.cos(t[1])*Math.sin(t[0]),t[2]*Math.sin(t[1])]},t.transformations.cartesianToSpherical=function(t){return[Math.atan2(t[1],t[0]),Math.atan2(t[2],Math.sqrt(t[0]*t[0]+t[1]*t[1])),Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])]},t.transformations.ellipsoidalToCartesian=function(n,a,o){(void 0===a||void 0===o)&&(a=t.constants.grs80.a,o=t.constants.grs80.e);var r=Math.sqrt(a*a*(1-o*o));return[a*Math.cos(n[1])*Math.cos(n[0]),a*Math.cos(n[1])*Math.sin(n[0]),r*Math.sin(n[1])]},t.transformations.cartesianToEllipsoidal=function(n,a,o){(void 0===a||void 0===o)&&(a=t.constants.grs80.a,o=t.constants.grs80.e);var r=Math.sqrt(n[0]*n[0]+n[1]*n[1]),e=Math.sqrt(a*a*(1-o*o));return[Math.atan2(n[1],n[0]),Math.atan2(n[2]*a,r*e)]},t.transformations.geodeticToCartesian=function(n,a,o){(void 0===a||void 0===o)&&(a=t.constants.earth.a,o=t.constants.earth.e);var r=a/Math.sqrt(1-Math.pow(o*Math.sin(n[1]),2));return[(r+n[2])*Math.cos(n[1])*Math.cos(n[0]),(r+n[2])*Math.cos(n[1])*Math.sin(n[0]),(r*(1-o*o)+n[2])*Math.sin(n[1])]},t.transformations.cartesianToGeodetic=function(n,a,o){(void 0===a||void 0===o)&&(a=t.constants.earth.a,o=t.constants.earth.e);for(var r=Math.atan2(n[1],n[0]),e=Math.sqrt(n[0]*n[0]+n[1]*n[1]),i=Math.atan2(n[2],e),s,c,h=0;100>h;){s=a/Math.sqrt(1-Math.pow(o*Math.sin(i),2));var u=n[2]+o*o*s*Math.sin(i);if(c=Math.atan2(u,e),Math.abs(c-i)<1e-15)break;i=c,h++}var f=e/Math.cos(c)-s;return[r,c,f]},t.transformations.orbitalPlaneToInertial=function(n,a,o,r){return t.v.mm(t.v.r(-a,3),t.v.mm(t.v.r(-r,1),t.v.mm(t.v.r(-o,3),n)))},t.transformations.inertialToFixed=function(n,a,o,r){return r||(r=3),o||(o=t.constants.earth.ω),t.v.mm(t.v.r(o*a,3),n)},t.transformations.fixedToInertial=function(n,a,o,r){return t.transformations.inertialToFixed(n,a,-o,r)},t.transformations.fixedToTopocentric=function(n,a,o,r,e){o||(o=t.constants.earth.a),r||0===r||(r=t.constants.earth.e);var i=t.transformations.geodeticToCartesian(a,o,r),s=n.map(function(t,n){return t-i[n]}),c;return c=e?t.v.mm(t.v.r(Math.PI/2-a[1],2),t.v.r(a[0],3)):t.v.mm(t.v.q(1),t.v.mm(t.v.r(Math.PI/2-a[1],2),t.v.r(a[0],3))),t.v.mm(c,s)},t.transformations.topocentricToFixed=function(n,a,o,r,e){o||(o=t.constants.earth.a),r||0===r||(r=t.constants.earth.e);var i=t.transformations.geodeticToCartesian(a,o,r),s;s=e?t.v.mm(t.v.r(-a[0],3),t.v.r(a[1]-Math.PI/2,2)):t.v.mm(t.v.mm(t.v.r(-a[0],3),t.v.r(a[1]-Math.PI/2,2)),t.v.q(1));var c=t.v.mm(s,n);return c.map(function(t,n){return t+i[n]})},t.transformations.topocentricToHorizontal=function(t){var n=(2*Math.PI+Math.atan2(t[1],t[0]))%(2*Math.PI);return[n,Math.atan2(t[2],Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))),Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2))]},t.transformations.horizontalToTopocentric=function(t){return[t[2]*Math.cos(t[1])*Math.cos(t[0]),t[2]*Math.cos(t[1])*Math.sin(t[0]),t[2]*Math.sin(t[1])]},t.position={},t.position.keplerEquation=function(t,n){var a;a=.8>t?n:Math.PI;for(var o=1,r=0;Math.abs(o)>1e-18&&100>r;)o=(n+t*Math.sin(a)-a)/(1-t*Math.cos(a)),a+=o,r++;return a},t.position.simple=function(n,a,o,r,e,i,s,c,h,u){c||(c=0);var f=t.constants.earth.GM;h&&(f=t.constants.common.G*h),u&&(f=t.constants.common.G*(h+u));var M=n*(1-a*a),m=Math.sqrt(f/Math.pow(n,3)),T=c+m*(i-s),v=t.position.keplerEquation(a,T),l=2*Math.atan(Math.sqrt((1+a)/(1-a))*Math.tan(v/2)),w=M/(1+a*Math.cos(l)),d=[w*Math.cos(l),w*Math.sin(l),0],p=[-Math.sqrt(f/M)*Math.sin(l),Math.sqrt(f/M)*(a+Math.cos(l)),0],D=t.transformations.orbitalPlaneToInertial(d,r,e,o),I=t.transformations.orbitalPlaneToInertial(p,r,e,o);return[D,I]},t}()},{}]},{},[1])(1)});
//# sourceMappingURL=orb.min.js.map